import{d as q,r as v,u as I,c as w,o as K,a as R,b as c,f as O,t as D,h as s,g as o,e as m,i as k,v as B,F as S,j as H,x as F,y as P,k as X,n as a,s as b,E as j,p as E,q as T,z as C,A as x,_ as W}from"./index-DddgXWB4.js";import{u as Q,n as _}from"./newsDialog-3I3lS5B5.js";const M="data:image/png;base64,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",G={class:"background"},Y={class:"newsList-container"},$={key:0,class:"loading-container"},ee={key:1,class:"error-container"},se={key:2},te={class:"newsList"},ne=["onClick"],oe={class:"news-main"},ae={class:"news-header"},le={class:"news-contene"},re={class:"newsImg-container"},ie=["src"],ce={key:3,class:"empty-container"},de=q({__name:"moreNews",setup(ue){P(n=>({"00a49255":y.value+50,"63b9095b":y.value}));const V=X(),l=v(5),t=Q(),p=I(),g=v(!1),L=v(null),J=()=>{V.push("/News")},r=w(()=>t.newsList||[]),h=()=>new Promise(n=>{const e=A.value.slice(0,l.value).filter(i=>i);if(e.length===0){n();return}let d=0;e.forEach(i=>{const u=new Image;u.src=i;const N=()=>{d++,d===e.length&&n()};u.onload=N,u.onerror=()=>{u.src="@/assets/default-img.png",N()}})}),Z=w(()=>r.value.slice(0,l.value)),y=w(()=>`${l.value*13+10}rem`),A=w(()=>!t.newsList||t.newsList.length===0?[]:t.newsList.map(n=>{try{return new URL(n.imgUrl,"http://localhost:5173/src/assets/newsImg/").href}catch(e){return console.error("构建图片URL失败:",e),""}})),f=async()=>{try{await t.fetchAllNews(),await h(),p.markComponentLoaded("news-more")}catch(n){console.error("获取新闻数据失败:",n),p.markComponentLoaded("news-more")}},U=async()=>{l.value+2<=r.value.length?l.value+=2:l.value=r.value.length,await h()},z=n=>{r.value[n]&&(L.value=r.value[n],g.value=!0)};return K(async()=>{r.value.length===0&&await f()}),R(()=>{console.log("我才没了")}),(n,e)=>(a(),c(S,null,[g.value?(a(),O(_,{key:0,DialogVisible:g.value,currentNews:L.value,"is-loading":o(t).loading,onClose:e[0]||(e[0]=d=>g.value=!1)},null,8,["DialogVisible","currentNews","is-loading"])):D("",!0),s("div",G,[s("div",Y,[s("div",null,[m(o(b),{size:"large",class:"custom-btn",type:"",text:"",round:"",plain:"",onClick:J},{default:k(()=>e[1]||(e[1]=[s("img",{src:M,class:"btn-img"},null,-1)])),_:1,__:[1]})]),e[4]||(e[4]=s("div",{class:"title"},"Lastest News",-1)),o(t).loading&&o(t).newsList.length===0?(a(),c("div",$,[m(o(j),{type:"circle",width:80,height:80}),e[2]||(e[2]=s("p",null,"正在加载新闻...",-1))])):o(t).error?(a(),c("div",ee,[m(o(E),{title:"加载失败",message:o(t).error,type:"error","show-icon":""},null,8,["message"]),m(o(b),{onClick:f},{default:k(()=>e[3]||(e[3]=[T("重新加载",-1)])),_:1,__:[3]})])):o(t).newsList.length>0?(a(),c("div",se,[s("div",te,[(a(!0),c(S,null,H(Z.value,(d,i)=>(a(),c("div",{class:"news-container",key:i,onClick:u=>z(i)},[s("div",oe,[s("div",ae,C(d.title||"新闻标题"),1),s("div",le,C(d.text||"新闻内容"),1)]),s("div",re,[s("img",{src:A.value[i]||"",alt:"新闻图片",class:"news-img"},null,8,ie)])],8,ne))),128))]),B(s("div",{class:"loadMore",onClick:U}," 加载更多 + ",512),[[F,l.value<r.value.length]])])):(a(),c("div",ce,[m(o(x),{description:"暂无新闻数据"})]))])])],64))}}),we=W(de,[["__scopeId","data-v-a5c1dc30"]]);export{we as default};
